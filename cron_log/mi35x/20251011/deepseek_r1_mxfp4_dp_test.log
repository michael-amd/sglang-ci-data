[nightly] ==========================================
[nightly] SGL Nightly Benchmark Started
[nightly] ==========================================
[nightly] Command: perf_nightly.sh --model=deepseek --model-path=/data/models/amd-DeepSeek-R1-MXFP4-Preview --model-name=DeepSeek-R1-MXFP4-Preview --mode=online --hardware=mi35x --enable-dp-test --teams-webhook-url=https://prod-99.westus.logic.azure.com/workflows/44b23afb37e74288b6b006c60bbe65b2/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=ucbP9AJ9WeZtxe95Wmi8TfLUjiEo0AZSZP4Y_cNgWS0
[nightly] Start time: 2025-10-11 14:50:02 PDT
[nightly] Machine: smci355-ccs-aus-m15-21.cs-aus.dcgpu
[nightly] Working directory: /mnt/raid/michael/sglang-ci
[nightly] Script location: /mnt/raid/michael/sglang-ci/perf_nightly.sh
[nightly] Process ID: 1935641
[nightly] ==========================================

[nightly] Runtime Environment:
[nightly] User: michaezh | Groups: michaezh spack everyone... | Docker: /usr/bin/docker
[nightly] Testing Docker daemon access...
[nightly] Docker daemon accessible - proceeding...
[nightly] Teams webhook URL provided via command line - notifications enabled
[nightly] DeepSeek DP test enabled via command line
[nightly] DP test implies DP attention checks
[nightly] Custom model path provided: /data/models/amd-DeepSeek-R1-MXFP4-Preview
[nightly] Hardware: mi35x, ROCM Version: rocm700
[nightly] Custom model name provided: DeepSeek-R1-MXFP4-Preview
[nightly] Model: deepseek, Mode(s): online
[nightly] Created process lock: /tmp/perf_nightly_deepseek.lock
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 6c5a729fe0ff
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Searching for non-SRT images for deepseek for the last 1 days...
[nightly] Searching for non-SRT mi35x image in 'rocm/sgl-dev' for date 20251011...
[nightly] Found candidate tag for day -0: v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Found local image: rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Successfully obtained image for date 20251011: rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Found 1 valid image(s) to run benchmarks on:
[nightly]   - rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011

[nightly] ==========================================
[nightly] Starting benchmarks for image: rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011
[nightly] ==========================================
[nightly] Checking GPU status before starting benchmarks for rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011...
[nightly] GPU is busy. Attempting to stop running Docker containers...
[nightly] Stopping running containers: 6b7d3af04f0b
[nightly] Waiting 15s for GPU to become idle...
[nightly] WARN: GPU may still be busy, but proceeding as requested.
[nightly] Checking benchmark completion in: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online
[nightly] Found 0 completed benchmark runs
[nightly] INFO: Found 0/15 completed runs for rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011 (online). Proceeding with benchmarks.
[nightly] Using Docker image: rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Container name: sgl-dev_v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Reusing container sgl-dev_v0.5.3.post1-rocm700-mi35x-20251011
[nightly] === Starting benchmark execution ===
[nightly] === Starting nightly DEEPSEEK online benchmark ===
[nightly] Launching deepseek_perf_online_csv.sh inside sgl-dev_v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Passing --model-name='DeepSeek-R1-MXFP4-Preview' to DeepSeek benchmark
[nightly] Adding --check-dp-attention flag for DeepSeek online benchmark
[nightly] Adding --enable-dp-test flag for DeepSeek online benchmark
✅ Parameter validation passed
[online] Script started at: 2025-10-11 14:50:34 PDT
Scanning existing logs to check if all benchmarks are already complete...
Checking GSM8K log status...
Missing: GSM8K log file (/mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log)
Checking serving benchmark logs...
Missing: Concurrency 128, Run 1
Missing: Concurrency 128, Run 2
Missing: Concurrency 128, Run 3
Missing: Concurrency 64, Run 1
Missing: Concurrency 64, Run 2
Missing: Concurrency 64, Run 3
Missing: Concurrency 16, Run 1
Missing: Concurrency 16, Run 2
Missing: Concurrency 16, Run 3
Missing: Concurrency 4, Run 1
Missing: Concurrency 4, Run 2
Missing: Concurrency 4, Run 3
Missing: Concurrency 1, Run 1
Missing: Concurrency 1, Run 2
Missing: Concurrency 1, Run 3
Scan complete: 15 total runs needed, 15 missing/incomplete
❌ Missing 15 serving benchmark runs.
❌ GSM8K benchmark is missing, empty, or incomplete.
Server startup required.
Clearing previous logs...
Starting SGLang server for online GSM8K benchmark...
[DEBUG] Using Data Parallel attention settings with SGLANG_USE_AITER=1
[DEBUG] Enabling SGLANG_USE_ROCM700A for ROCm 700 image
Waiting for SGLang server (PID: 46) to start... (Max 15 minutes)
Server logs are being written to: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
.........................
SGLang server started successfully after 125 seconds.
=== Online GSM8K Benchmark: TP=8, Questions=2000, Parallel=2000, Shots=5 ===
[progress] Total benchmark runs to execute: 20 (GSM8K: 5, Serving: 15) - DP test mode
[progress] [--------------------------------------------------] 0/20 (0%) 
Starting GSM8K Online Benchmark...
Running 5 test iterations...
Executing GSM8K test Run 1 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:17<6:27:35, 17.64s/it]  0%|          | 3/1319 [00:17<1:41:53,  4.65s/it]  0%|          | 4/1319 [00:17<40:12,  1.83s/it]    1%|          | 8/1319 [00:18<19:03,  1.15it/s]  1%|          | 16/1319 [00:18<07:46,  2.79it/s]  3%|▎         | 34/1319 [00:18<02:40,  7.99it/s]  4%|▎         | 48/1319 [00:18<01:38, 12.86it/s]  6%|▌         | 73/1319 [00:18<00:51, 24.17it/s]  6%|▋         | 83/1319 [00:18<00:42, 29.25it/s]  7%|▋         | 97/1319 [00:18<00:31, 38.90it/s]  9%|▊         | 114/1319 [00:19<00:22, 52.94it/s] 10%|█         | 132/1319 [00:19<00:17, 69.49it/s] 12%|█▏        | 162/1319 [00:19<00:12, 95.44it/s] 12%|█▏        | 163/1319 [00:19<00:09, 117.45it/s] 14%|█▍        | 187/1319 [00:19<00:09, 119.90it/s] 15%|█▌        | 202/1319 [00:19<00:10, 107.38it/s] 16%|█▋        | 215/1319 [00:19<00:11, 96.00it/s]  18%|█▊        | 236/1319 [00:20<00:10, 99.92it/s] 20%|█▉        | 260/1319 [00:20<00:09, 107.73it/s] 21%|██        | 275/1319 [00:20<00:09, 114.79it/s] 22%|██▏       | 288/1319 [00:20<00:08, 116.48it/s] 23%|██▎       | 301/1319 [00:20<00:08, 118.89it/s] 24%|██▍       | 315/1319 [00:20<00:08, 123.82it/s] 25%|██▌       | 331/1319 [00:20<00:07, 132.13it/s] 26%|██▋       | 348/1319 [00:20<00:06, 141.08it/s] 28%|██▊       | 363/1319 [00:20<00:06, 143.05it/s] 29%|██▉       | 383/1319 [00:21<00:05, 158.11it/s] 30%|███       | 400/1319 [00:21<00:05, 159.42it/s] 30%|███       | 401/1319 [00:21<00:05, 163.03it/s] 33%|███▎      | 437/1319 [00:21<00:04, 186.77it/s] 35%|███▌      | 465/1319 [00:21<00:04, 180.33it/s] 37%|███▋      | 491/1319 [00:21<00:04, 171.78it/s] 40%|███▉      | 523/1319 [00:21<00:04, 172.95it/s] 42%|████▏     | 550/1319 [00:22<00:05, 148.08it/s] 44%|████▎     | 576/1319 [00:22<00:04, 169.28it/s] 45%|████▌     | 598/1319 [00:22<00:04, 155.16it/s] 48%|████▊     | 631/1319 [00:22<00:04, 165.67it/s] 50%|█████     | 661/1319 [00:22<00:03, 169.05it/s] 50%|█████     | 663/1319 [00:22<00:03, 177.63it/s] 50%|█████     | 663/1319 [00:22<00:03, 177.63it/s] 52%|█████▏    | 691/1319 [00:22<00:03, 176.83it/s] 54%|█████▍    | 709/1319 [00:22<00:03, 167.94it/s] 55%|█████▌    | 730/1319 [00:23<00:03, 154.18it/s] 55%|█████▌    | 731/1319 [00:23<00:04, 146.74it/s] 57%|█████▋    | 753/1319 [00:23<00:04, 140.15it/s] 60%|█████▉    | 785/1319 [00:23<00:03, 157.57it/s] 61%|██████▏   | 808/1319 [00:23<00:03, 152.91it/s] 63%|██████▎   | 827/1319 [00:23<00:03, 160.47it/s] 64%|██████▍   | 844/1319 [00:23<00:03, 142.00it/s] 66%|██████▋   | 874/1319 [00:24<00:02, 165.34it/s] 66%|██████▋   | 875/1319 [00:24<00:02, 184.76it/s] 69%|██████▉   | 907/1319 [00:24<00:02, 201.98it/s] 71%|███████   | 934/1319 [00:24<00:01, 202.90it/s] 73%|███████▎  | 964/1319 [00:24<00:01, 209.79it/s] 75%|███████▍  | 986/1319 [00:24<00:01, 184.16it/s] 75%|███████▍  | 987/1319 [00:24<00:01, 169.88it/s] 76%|███████▌  | 1005/1319 [00:24<00:02, 148.38it/s] 78%|███████▊  | 1026/1319 [00:24<00:01, 151.50it/s] 80%|███████▉  | 1049/1319 [00:25<00:01, 160.65it/s] 81%|████████▏ | 1074/1319 [00:25<00:01, 174.71it/s] 83%|████████▎ | 1099/1319 [00:25<00:01, 177.32it/s] 85%|████████▍ | 1118/1319 [00:25<00:01, 169.18it/s] 87%|████████▋ | 1146/1319 [00:25<00:00, 184.93it/s] 88%|████████▊ | 1165/1319 [00:25<00:00, 168.15it/s] 90%|████████▉ | 1183/1319 [00:25<00:00, 157.31it/s] 91%|█████████ | 1199/1319 [00:25<00:00, 144.63it/s] 92%|█████████▏| 1214/1319 [00:26<00:00, 142.34it/s] 93%|█████████▎| 1229/1319 [00:26<00:00, 124.86it/s] 94%|█████████▍| 1242/1319 [00:26<00:00, 105.06it/s] 95%|█████████▌| 1254/1319 [00:26<00:00, 85.53it/s]  96%|█████████▌| 1264/1319 [00:26<00:00, 69.68it/s] 96%|█████████▋| 1272/1319 [00:26<00:00, 69.96it/s] 97%|█████████▋| 1280/1319 [00:27<00:01, 37.40it/s] 97%|█████████▋| 1286/1319 [00:27<00:01, 31.03it/s] 98%|█████████▊| 1293/1319 [00:28<00:00, 33.44it/s] 98%|█████████▊| 1298/1319 [00:28<00:01, 20.87it/s] 99%|█████████▊| 1302/1319 [00:28<00:00, 21.26it/s] 99%|█████████▉| 1306/1319 [00:30<00:01,  9.95it/s] 99%|█████████▉| 1309/1319 [00:32<00:02,  4.55it/s] 99%|█████████▉| 1311/1319 [00:33<00:02,  3.92it/s] 99%|█████████▉| 1312/1319 [00:33<00:01,  3.75it/s]100%|██████████| 1319/1319 [00:33<00:00, 39.70it/s]
Accuracy: 0.935
Invalid: 0.000
Latency: 37.899 s
Output throughput: 3461.489 token/s
Run 1 completed in 42 seconds
Run 1: Accuracy: 0.935
[progress] [==------------------------------------------------] 1/20 (5%)  | GSM8K: Run 1
Executing GSM8K test Run 2 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:06:48, 11.24s/it]  0%|          | 2/1319 [00:11<1:45:15,  4.80s/it]  0%|          | 3/1319 [00:11<1:01:26,  2.80s/it]  0%|          | 4/1319 [00:12<39:39,  1.81s/it]    1%|          | 7/1319 [00:12<15:34,  1.40it/s]  1%|          | 12/1319 [00:12<06:43,  3.24it/s]  2%|▏         | 25/1319 [00:12<02:10,  9.91it/s]  2%|▏         | 28/1319 [00:12<01:07, 18.99it/s]  4%|▎         | 48/1319 [00:12<00:38, 32.79it/s]  5%|▍         | 63/1319 [00:13<00:27, 45.35it/s]  6%|▌         | 77/1319 [00:13<00:24, 51.72it/s]  8%|▊         | 103/1319 [00:13<00:14, 81.84it/s]  9%|▉         | 118/1319 [00:13<00:14, 85.02it/s]  9%|▉         | 119/1319 [00:13<00:13, 89.16it/s] 10%|█         | 132/1319 [00:13<00:13, 84.88it/s] 11%|█▏        | 150/1319 [00:13<00:11, 103.09it/s] 11%|█▏        | 151/1319 [00:13<00:09, 121.65it/s] 13%|█▎        | 169/1319 [00:13<00:10, 111.99it/s] 14%|█▍        | 188/1319 [00:14<00:10, 107.62it/s] 15%|█▌        | 203/1319 [00:14<00:09, 116.27it/s] 17%|█▋        | 223/1319 [00:14<00:10, 101.78it/s] 18%|█▊        | 238/1319 [00:14<00:09, 110.83it/s] 19%|█▉        | 255/1319 [00:14<00:08, 123.03it/s] 20%|██        | 269/1319 [00:14<00:08, 126.22it/s] 22%|██▏       | 284/1319 [00:14<00:07, 131.23it/s] 23%|██▎       | 302/1319 [00:15<00:08, 126.39it/s] 23%|██▎       | 304/1319 [00:15<00:08, 125.54it/s] 24%|██▍       | 319/1319 [00:15<00:07, 128.68it/s] 25%|██▌       | 333/1319 [00:15<00:07, 130.26it/s] 27%|██▋       | 351/1319 [00:15<00:06, 143.36it/s] 29%|██▉       | 384/1319 [00:15<00:06, 150.27it/s] 32%|███▏      | 421/1319 [00:15<00:05, 169.15it/s] 35%|███▍      | 460/1319 [00:15<00:04, 190.15it/s] 37%|███▋      | 489/1319 [00:16<00:04, 177.43it/s] 39%|███▉      | 514/1319 [00:16<00:04, 168.99it/s] 39%|███▉      | 515/1319 [00:16<00:04, 164.82it/s] 41%|████      | 543/1319 [00:16<00:04, 160.96it/s] 41%|████▏     | 545/1319 [00:16<00:04, 160.05it/s] 43%|████▎     | 562/1319 [00:16<00:05, 146.82it/s] 44%|████▍     | 583/1319 [00:16<00:05, 129.70it/s] 46%|████▌     | 602/1319 [00:16<00:05, 123.50it/s] 48%|████▊     | 635/1319 [00:17<00:05, 134.59it/s] 50%|████▉     | 655/1319 [00:17<00:05, 131.93it/s] 51%|█████▏    | 679/1319 [00:17<00:04, 136.77it/s] 53%|█████▎    | 704/1319 [00:17<00:04, 141.89it/s] 56%|█████▌    | 735/1319 [00:17<00:03, 147.66it/s] 58%|█████▊    | 760/1319 [00:18<00:03, 148.17it/s] 59%|█████▉    | 784/1319 [00:18<00:03, 148.04it/s] 61%|██████    | 799/1319 [00:18<00:03, 143.99it/s] 62%|██████▏   | 814/1319 [00:18<00:03, 137.39it/s] 64%|██████▍   | 845/1319 [00:18<00:03, 157.04it/s] 66%|██████▌   | 869/1319 [00:18<00:02, 158.63it/s] 68%|██████▊   | 895/1319 [00:18<00:02, 163.10it/s] 70%|███████   | 925/1319 [00:19<00:02, 180.96it/s] 70%|███████   | 926/1319 [00:19<00:02, 196.34it/s] 72%|███████▏  | 946/1319 [00:19<00:02, 161.42it/s] 74%|███████▎  | 971/1319 [00:19<00:02, 169.54it/s] 76%|███████▌  | 998/1319 [00:19<00:01, 178.78it/s] 77%|███████▋  | 1022/1319 [00:19<00:01, 179.97it/s] 79%|███████▉  | 1042/1319 [00:19<00:01, 171.86it/s] 81%|████████  | 1063/1319 [00:19<00:01, 162.41it/s] 82%|████████▏ | 1082/1319 [00:20<00:01, 144.79it/s] 83%|████████▎ | 1097/1319 [00:20<00:01, 139.74it/s] 84%|████████▍ | 1112/1319 [00:20<00:01, 129.16it/s] 86%|████████▌ | 1134/1319 [00:20<00:01, 142.95it/s] 87%|████████▋ | 1150/1319 [00:20<00:01, 138.50it/s] 89%|████████▉ | 1171/1319 [00:20<00:01, 145.12it/s] 90%|█████████ | 1189/1319 [00:20<00:00, 151.59it/s] 90%|█████████ | 1190/1319 [00:20<00:00, 159.09it/s] 92%|█████████▏| 1207/1319 [00:20<00:00, 157.50it/s] 93%|█████████▎| 1223/1319 [00:21<00:00, 98.09it/s]  94%|█████████▎| 1236/1319 [00:21<00:00, 102.49it/s] 95%|█████████▍| 1249/1319 [00:21<00:00, 94.68it/s]  96%|█████████▌| 1261/1319 [00:21<00:00, 74.62it/s] 96%|█████████▋| 1271/1319 [00:21<00:00, 71.53it/s] 97%|█████████▋| 1280/1319 [00:22<00:00, 60.94it/s] 98%|█████████▊| 1287/1319 [00:22<00:00, 43.94it/s] 98%|█████████▊| 1293/1319 [00:22<00:00, 33.13it/s] 98%|█████████▊| 1298/1319 [00:23<00:00, 31.97it/s] 99%|█████████▊| 1302/1319 [00:23<00:00, 29.36it/s] 99%|█████████▉| 1306/1319 [00:23<00:00, 15.46it/s] 99%|█████████▉| 1309/1319 [00:24<00:00, 11.09it/s] 99%|█████████▉| 1311/1319 [00:27<00:02,  3.68it/s]100%|█████████▉| 1313/1319 [00:27<00:01,  4.01it/s]100%|██████████| 1319/1319 [00:27<00:00, 47.85it/s]
Accuracy: 0.943
Invalid: 0.000
Latency: 27.926 s
Output throughput: 4707.360 token/s
Run 2 completed in 32 seconds
Run 2: Accuracy: 0.943
[progress] [=====---------------------------------------------] 2/20 (10%)  | GSM8K: Run 2
Executing GSM8K test Run 3 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:09<3:28:33,  9.49s/it]  0%|          | 2/1319 [00:10<1:41:17,  4.61s/it]  0%|          | 5/1319 [00:10<29:42,  1.36s/it]    1%|▏         | 18/1319 [00:10<05:33,  3.91it/s]  2%|▏         | 31/1319 [00:11<02:42,  7.94it/s]  4%|▍         | 50/1319 [00:11<01:18, 16.10it/s]  4%|▍         | 54/1319 [00:11<00:30, 41.63it/s]  4%|▍         | 55/1319 [00:11<00:30, 41.63it/s]  5%|▌         | 71/1319 [00:11<00:24, 50.88it/s]  7%|▋         | 87/1319 [00:11<00:21, 57.85it/s]  8%|▊         | 100/1319 [00:11<00:18, 65.20it/s]  9%|▊         | 114/1319 [00:11<00:15, 76.26it/s] 11%|█         | 142/1319 [00:12<00:12, 97.86it/s] 12%|█▏        | 159/1319 [00:12<00:12, 95.08it/s] 12%|█▏        | 161/1319 [00:12<00:12, 95.91it/s] 12%|█▏        | 161/1319 [00:12<00:12, 95.91it/s] 13%|█▎        | 172/1319 [00:12<00:12, 94.57it/s] 14%|█▍        | 190/1319 [00:12<00:11, 94.42it/s] 15%|█▌        | 201/1319 [00:12<00:12, 91.40it/s] 15%|█▌        | 202/1319 [00:12<00:12, 90.89it/s] 16%|█▌        | 212/1319 [00:12<00:12, 88.31it/s] 17%|█▋        | 221/1319 [00:12<00:12, 84.77it/s] 18%|█▊        | 244/1319 [00:13<00:10, 98.17it/s] 20%|██        | 270/1319 [00:13<00:07, 133.25it/s] 22%|██▏       | 288/1319 [00:13<00:07, 144.17it/s] 23%|██▎       | 304/1319 [00:13<00:07, 130.81it/s] 24%|██▍       | 318/1319 [00:13<00:07, 132.83it/s] 25%|██▌       | 336/1319 [00:13<00:06, 144.84it/s] 27%|██▋       | 356/1319 [00:13<00:06, 159.00it/s] 28%|██▊       | 373/1319 [00:13<00:05, 161.24it/s] 28%|██▊       | 374/1319 [00:13<00:05, 165.61it/s] 30%|██▉       | 391/1319 [00:13<00:05, 166.43it/s] 32%|███▏      | 420/1319 [00:14<00:05, 170.36it/s] 35%|███▍      | 458/1319 [00:14<00:04, 191.82it/s] 35%|███▍      | 459/1319 [00:14<00:04, 206.56it/s] 36%|███▋      | 480/1319 [00:14<00:04, 206.10it/s] 38%|███▊      | 501/1319 [00:14<00:04, 175.68it/s] 40%|████      | 533/1319 [00:14<00:04, 175.56it/s] 43%|████▎     | 566/1319 [00:14<00:04, 178.14it/s] 44%|████▍     | 584/1319 [00:15<00:04, 171.73it/s] 46%|████▌     | 604/1319 [00:15<00:04, 153.52it/s] 47%|████▋     | 620/1319 [00:15<00:04, 150.75it/s] 48%|████▊     | 636/1319 [00:15<00:05, 135.20it/s] 50%|████▉     | 659/1319 [00:15<00:04, 137.04it/s] 52%|█████▏    | 689/1319 [00:15<00:04, 150.58it/s] 54%|█████▍    | 710/1319 [00:15<00:04, 142.38it/s] 54%|█████▍    | 711/1319 [00:15<00:04, 138.65it/s] 55%|█████▌    | 727/1319 [00:16<00:04, 134.63it/s] 55%|█████▌    | 728/1319 [00:16<00:04, 133.50it/s] 58%|█████▊    | 761/1319 [00:16<00:03, 148.41it/s] 59%|█████▉    | 781/1319 [00:16<00:03, 140.96it/s] 61%|██████    | 799/1319 [00:16<00:03, 130.92it/s] 63%|██████▎   | 826/1319 [00:16<00:03, 146.45it/s] 64%|██████▍   | 847/1319 [00:16<00:03, 145.21it/s] 65%|██████▌   | 862/1319 [00:17<00:03, 118.78it/s] 67%|██████▋   | 888/1319 [00:17<00:03, 133.99it/s] 70%|██████▉   | 919/1319 [00:17<00:02, 160.59it/s] 72%|███████▏  | 944/1319 [00:17<00:02, 167.99it/s] 73%|███████▎  | 964/1319 [00:17<00:02, 163.30it/s] 75%|███████▍  | 988/1319 [00:17<00:01, 168.18it/s] 77%|███████▋  | 1018/1319 [00:17<00:01, 185.22it/s] 79%|███████▊  | 1037/1319 [00:18<00:01, 172.71it/s] 80%|███████▉  | 1055/1319 [00:18<00:01, 166.30it/s] 81%|████████▏ | 1072/1319 [00:18<00:01, 160.08it/s] 83%|████████▎ | 1089/1319 [00:18<00:01, 154.27it/s] 84%|████████▍ | 1105/1319 [00:18<00:01, 148.96it/s] 85%|████████▍ | 1121/1319 [00:18<00:01, 142.46it/s] 87%|████████▋ | 1144/1319 [00:18<00:01, 154.67it/s] 88%|████████▊ | 1161/1319 [00:18<00:01, 144.94it/s] 89%|████████▉ | 1176/1319 [00:19<00:01, 133.59it/s] 90%|█████████ | 1191/1319 [00:19<00:00, 134.14it/s] 91%|█████████▏| 1205/1319 [00:19<00:01, 107.04it/s] 92%|█████████▏| 1217/1319 [00:19<00:01, 101.68it/s] 93%|█████████▎| 1228/1319 [00:19<00:00, 93.66it/s]  94%|█████████▍| 1238/1319 [00:19<00:01, 78.17it/s] 95%|█████████▍| 1247/1319 [00:20<00:01, 71.36it/s] 95%|█████████▌| 1255/1319 [00:20<00:00, 71.13it/s] 96%|█████████▌| 1263/1319 [00:20<00:00, 61.83it/s] 96%|█████████▋| 1270/1319 [00:20<00:00, 59.47it/s] 97%|█████████▋| 1277/1319 [00:20<00:00, 57.65it/s] 97%|█████████▋| 1283/1319 [00:20<00:00, 50.75it/s] 98%|█████████▊| 1289/1319 [00:21<00:00, 32.05it/s] 98%|█████████▊| 1295/1319 [00:21<00:00, 33.47it/s] 99%|█████████▊| 1300/1319 [00:22<00:01, 14.96it/s] 99%|█████████▉| 1303/1319 [00:24<00:02,  5.80it/s] 99%|█████████▉| 1306/1319 [00:26<00:03,  3.87it/s] 99%|█████████▉| 1308/1319 [00:26<00:02,  4.29it/s]100%|██████████| 1319/1319 [00:26<00:00, 49.95it/s]
Accuracy: 0.945
Invalid: 0.000
Latency: 26.611 s
Output throughput: 5066.625 token/s
Run 3 completed in 31 seconds
Run 3: Accuracy: 0.945
[progress] [=======-------------------------------------------] 3/20 (15%)  | GSM8K: Run 3
Executing GSM8K test Run 4 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:11<4:02:10, 11.02s/it]  0%|          | 2/1319 [00:11<1:43:21,  4.71s/it]  0%|          | 3/1319 [00:11<58:22,  2.66s/it]    0%|          | 4/1319 [00:11<38:13,  1.74s/it]  0%|          | 5/1319 [00:12<25:31,  1.17s/it]  1%|          | 16/1319 [00:12<04:07,  5.27it/s]  3%|▎         | 35/1319 [00:12<01:23, 15.43it/s]  3%|▎         | 37/1319 [00:12<00:44, 28.84it/s]  4%|▍         | 50/1319 [00:12<00:36, 34.56it/s]  5%|▌         | 72/1319 [00:12<00:25, 48.70it/s]  6%|▋         | 83/1319 [00:12<00:22, 54.55it/s]  8%|▊         | 105/1319 [00:12<00:15, 78.43it/s]  9%|▉         | 120/1319 [00:13<00:13, 89.76it/s] 10%|█         | 137/1319 [00:13<00:11, 103.85it/s] 12%|█▏        | 152/1319 [00:13<00:10, 108.44it/s] 12%|█▏        | 156/1319 [00:13<00:10, 114.11it/s] 13%|█▎        | 170/1319 [00:13<00:13, 82.88it/s]  13%|█▎        | 173/1319 [00:13<00:16, 70.20it/s] 14%|█▍        | 184/1319 [00:13<00:16, 67.06it/s] 16%|█▌        | 205/1319 [00:13<00:14, 79.10it/s] 17%|█▋        | 227/1319 [00:14<00:10, 103.55it/s] 17%|█▋        | 229/1319 [00:14<00:07, 152.93it/s] 17%|█▋        | 229/1319 [00:14<00:07, 152.93it/s] 19%|█▉        | 249/1319 [00:14<00:07, 134.24it/s] 20%|██        | 265/1319 [00:14<00:08, 126.61it/s] 21%|██        | 280/1319 [00:14<00:08, 124.34it/s] 22%|██▏       | 294/1319 [00:14<00:08, 127.02it/s] 24%|██▎       | 313/1319 [00:14<00:07, 141.98it/s] 25%|██▍       | 329/1319 [00:14<00:06, 145.20it/s] 26%|██▌       | 345/1319 [00:14<00:06, 149.04it/s] 27%|██▋       | 361/1319 [00:15<00:06, 150.87it/s] 27%|██▋       | 362/1319 [00:15<00:06, 154.92it/s] 29%|██▉       | 385/1319 [00:15<00:06, 136.21it/s] 32%|███▏      | 428/1319 [00:15<00:04, 178.78it/s] 34%|███▍      | 455/1319 [00:15<00:04, 173.21it/s] 36%|███▌      | 475/1319 [00:15<00:05, 156.16it/s] 38%|███▊      | 498/1319 [00:15<00:05, 145.68it/s] 40%|████      | 528/1319 [00:16<00:05, 151.44it/s] 42%|████▏     | 556/1319 [00:16<00:04, 152.78it/s] 44%|████▍     | 580/1319 [00:16<00:05, 147.47it/s] 46%|████▌     | 609/1319 [00:16<00:04, 147.47it/s] 47%|████▋     | 624/1319 [00:16<00:04, 143.90it/s] 49%|████▉     | 648/1319 [00:16<00:04, 145.60it/s] 49%|████▉     | 650/1319 [00:16<00:04, 152.52it/s] 49%|████▉     | 650/1319 [00:16<00:04, 152.52it/s] 52%|█████▏    | 690/1319 [00:17<00:03, 204.48it/s] 52%|█████▏    | 692/1319 [00:17<00:02, 293.08it/s] 52%|█████▏    | 692/1319 [00:17<00:02, 293.08it/s] 55%|█████▍    | 725/1319 [00:17<00:02, 217.51it/s] 57%|█████▋    | 752/1319 [00:17<00:02, 200.54it/s] 59%|█████▉    | 776/1319 [00:17<00:02, 184.42it/s] 61%|██████    | 799/1319 [00:17<00:03, 171.92it/s] 63%|██████▎   | 831/1319 [00:17<00:02, 179.61it/s] 65%|██████▍   | 851/1319 [00:18<00:02, 164.22it/s] 65%|██████▍   | 853/1319 [00:18<00:03, 150.56it/s] 65%|██████▍   | 853/1319 [00:18<00:03, 150.56it/s] 66%|██████▌   | 873/1319 [00:18<00:03, 146.96it/s] 68%|██████▊   | 895/1319 [00:18<00:02, 147.41it/s] 69%|██████▉   | 910/1319 [00:18<00:02, 142.14it/s] 72%|███████▏  | 949/1319 [00:18<00:01, 186.62it/s] 74%|███████▍  | 974/1319 [00:18<00:01, 187.08it/s] 75%|███████▌  | 993/1319 [00:18<00:01, 181.42it/s] 77%|███████▋  | 1012/1319 [00:19<00:01, 169.25it/s] 77%|███████▋  | 1013/1319 [00:19<00:01, 163.05it/s] 78%|███████▊  | 1031/1319 [00:19<00:01, 155.66it/s] 80%|███████▉  | 1049/1319 [00:19<00:01, 149.91it/s] 81%|████████  | 1066/1319 [00:19<00:01, 143.93it/s] 82%|████████▏ | 1081/1319 [00:19<00:01, 138.08it/s] 83%|████████▎ | 1095/1319 [00:19<00:01, 133.32it/s] 84%|████████▍ | 1113/1319 [00:19<00:01, 130.57it/s] 86%|████████▌ | 1133/1319 [00:19<00:01, 142.06it/s] 87%|████████▋ | 1150/1319 [00:20<00:01, 145.62it/s] 88%|████████▊ | 1165/1319 [00:20<00:01, 127.56it/s] 90%|████████▉ | 1186/1319 [00:20<00:00, 138.82it/s] 91%|█████████ | 1201/1319 [00:20<00:01, 116.63it/s] 92%|█████████▏| 1214/1319 [00:20<00:01, 91.06it/s]  93%|█████████▎| 1225/1319 [00:20<00:01, 88.60it/s] 94%|█████████▎| 1236/1319 [00:20<00:00, 91.51it/s] 94%|█████████▍| 1246/1319 [00:21<00:00, 78.46it/s] 95%|█████████▌| 1258/1319 [00:21<00:00, 72.68it/s] 96%|█████████▌| 1266/1319 [00:21<00:00, 63.26it/s] 97%|█████████▋| 1273/1319 [00:21<00:00, 60.64it/s] 97%|█████████▋| 1280/1319 [00:21<00:00, 52.34it/s] 97%|█████████▋| 1286/1319 [00:22<00:00, 42.06it/s] 98%|█████████▊| 1291/1319 [00:22<00:00, 32.67it/s] 98%|█████████▊| 1295/1319 [00:22<00:00, 32.97it/s] 98%|█████████▊| 1299/1319 [00:22<00:00, 25.40it/s] 99%|█████████▊| 1302/1319 [00:23<00:00, 17.64it/s] 99%|█████████▉| 1305/1319 [00:23<00:01, 13.34it/s] 99%|█████████▉| 1307/1319 [00:25<00:02,  4.49it/s] 99%|█████████▉| 1309/1319 [00:26<00:02,  3.47it/s] 99%|█████████▉| 1310/1319 [00:27<00:02,  3.06it/s]100%|██████████| 1319/1319 [00:27<00:00, 48.32it/s]
Accuracy: 0.941
Invalid: 0.000
Latency: 27.479 s
Output throughput: 4843.027 token/s
Run 4 completed in 32 seconds
Run 4: Accuracy: 0.941
[progress] [==========----------------------------------------] 4/20 (20%)  | GSM8K: Run 4
Executing GSM8K test Run 5 ...
  0%|          | 0/1319 [00:00<?, ?it/s]  0%|          | 1/1319 [00:09<3:37:28,  9.90s/it]  0%|          | 2/1319 [00:09<2:16:49,  6.23s/it]  0%|          | 3/1319 [00:11<1:38:56,  4.51s/it]  0%|          | 6/1319 [00:11<40:35,  1.85s/it]    1%|          | 15/1319 [00:11<11:37,  1.87it/s]  3%|▎         | 36/1319 [00:11<03:26,  6.21it/s]  3%|▎         | 45/1319 [00:11<02:28,  8.60it/s]  5%|▍         | 63/1319 [00:11<01:24, 14.86it/s]  7%|▋         | 91/1319 [00:12<00:42, 28.57it/s]  8%|▊         | 108/1319 [00:12<00:33, 36.06it/s]  9%|▉         | 124/1319 [00:12<00:26, 45.56it/s] 11%|█▏        | 151/1319 [00:12<00:18, 64.87it/s] 13%|█▎        | 173/1319 [00:12<00:16, 70.57it/s] 14%|█▍        | 186/1319 [00:12<00:16, 67.45it/s] 15%|█▍        | 197/1319 [00:13<00:15, 70.91it/s] 16%|█▌        | 210/1319 [00:13<00:16, 66.67it/s] 18%|█▊        | 237/1319 [00:13<00:10, 98.97it/s] 20%|█▉        | 259/1319 [00:13<00:10, 103.45it/s] 21%|██        | 278/1319 [00:13<00:08, 118.61it/s] 22%|██▏       | 295/1319 [00:13<00:07, 128.77it/s] 24%|██▎       | 311/1319 [00:13<00:07, 134.01it/s] 25%|██▍       | 327/1319 [00:14<00:07, 139.76it/s] 27%|██▋       | 352/1319 [00:14<00:05, 167.85it/s] 27%|██▋       | 353/1319 [00:14<00:05, 192.20it/s] 28%|██▊       | 374/1319 [00:14<00:05, 159.48it/s] 30%|███       | 402/1319 [00:14<00:05, 164.43it/s] 33%|███▎      | 437/1319 [00:14<00:04, 179.98it/s] 35%|███▌      | 466/1319 [00:14<00:04, 175.31it/s] 37%|███▋      | 485/1319 [00:14<00:04, 169.23it/s] 37%|███▋      | 488/1319 [00:14<00:04, 168.94it/s] 37%|███▋      | 491/1319 [00:14<00:04, 168.94it/s] 37%|███▋      | 491/1319 [00:14<00:04, 168.94it/s] 39%|███▊      | 509/1319 [00:15<00:05, 143.58it/s] 41%|████      | 537/1319 [00:15<00:05, 147.95it/s] 42%|████▏     | 557/1319 [00:15<00:05, 136.76it/s] 43%|████▎     | 571/1319 [00:15<00:05, 131.45it/s] 46%|████▌     | 602/1319 [00:15<00:04, 149.69it/s] 49%|████▊     | 640/1319 [00:15<00:03, 176.31it/s] 50%|█████     | 662/1319 [00:16<00:03, 164.41it/s] 51%|█████▏    | 679/1319 [00:16<00:04, 148.88it/s] 52%|█████▏    | 680/1319 [00:16<00:04, 139.72it/s] 53%|█████▎    | 695/1319 [00:16<00:05, 122.51it/s] 55%|█████▍    | 721/1319 [00:16<00:04, 132.43it/s] 57%|█████▋    | 749/1319 [00:16<00:03, 144.15it/s] 59%|█████▊    | 772/1319 [00:16<00:03, 143.57it/s] 60%|█████▉    | 787/1319 [00:17<00:03, 137.33it/s] 61%|██████    | 801/1319 [00:17<00:03, 133.08it/s] 62%|██████▏   | 819/1319 [00:17<00:03, 125.94it/s] 64%|██████▍   | 846/1319 [00:17<00:03, 142.82it/s] 67%|██████▋   | 882/1319 [00:17<00:02, 184.41it/s] 69%|██████▉   | 911/1319 [00:17<00:02, 194.90it/s] 71%|███████   | 936/1319 [00:17<00:01, 193.08it/s] 72%|███████▏  | 956/1319 [00:17<00:02, 179.76it/s] 73%|███████▎  | 957/1319 [00:17<00:02, 172.57it/s] 74%|███████▍  | 982/1319 [00:18<00:01, 178.19it/s] 76%|███████▋  | 1006/1319 [00:18<00:01, 179.21it/s] 78%|███████▊  | 1025/1319 [00:18<00:01, 175.15it/s] 78%|███████▊  | 1026/1319 [00:18<00:01, 174.37it/s] 79%|███████▉  | 1044/1319 [00:18<00:01, 155.08it/s] 80%|████████  | 1061/1319 [00:18<00:01, 149.50it/s] 82%|████████▏ | 1081/1319 [00:18<00:01, 155.22it/s] 83%|████████▎ | 1101/1319 [00:18<00:01, 159.81it/s] 85%|████████▍ | 1118/1319 [00:18<00:01, 155.12it/s] 86%|████████▌ | 1137/1319 [00:19<00:01, 153.99it/s] 88%|████████▊ | 1161/1319 [00:19<00:00, 165.22it/s] 89%|████████▉ | 1179/1319 [00:19<00:00, 155.87it/s] 91%|█████████ | 1198/1319 [00:19<00:00, 163.75it/s] 92%|█████████▏| 1215/1319 [00:19<00:00, 161.13it/s] 93%|█████████▎| 1232/1319 [00:19<00:00, 123.86it/s] 94%|█████████▍| 1246/1319 [00:19<00:00, 110.16it/s] 95%|█████████▌| 1259/1319 [00:20<00:00, 82.35it/s]  96%|█████████▌| 1269/1319 [00:20<00:00, 67.60it/s] 97%|█████████▋| 1278/1319 [00:20<00:00, 61.73it/s] 97%|█████████▋| 1286/1319 [00:21<00:00, 43.89it/s] 98%|█████████▊| 1292/1319 [00:21<00:00, 45.05it/s] 98%|█████████▊| 1298/1319 [00:21<00:00, 34.24it/s] 99%|█████████▉| 1303/1319 [00:22<00:00, 21.01it/s] 99%|█████████▉| 1307/1319 [00:23<00:01,  8.88it/s] 99%|█████████▉| 1310/1319 [00:25<00:01,  4.55it/s]100%|██████████| 1319/1319 [00:26<00:00, 50.69it/s]
Accuracy: 0.942
Invalid: 0.000
Latency: 26.131 s
Output throughput: 5034.643 token/s
Run 5 completed in 30 seconds
Run 5: Accuracy: 0.942
[progress] [============--------------------------------------] 5/20 (25%)  | GSM8K: Run 5
GSM8K test completed in 167 seconds
Average Accuracy over 5 runs: 0.941
Average accuracy meets threshold (0.93).
✅ GSM8K benchmark completed successfully.
GSM8K log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log
Server log saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_server.log
Starting serving benchmark tests with different concurrency levels...
[online] Structured CSV initialized at /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_serving_dp_attention.csv
Processing concurrency 128 with 3 runs...
Running serving benchmark with concurrency 128 (Run 1) - 500 prompts...
Concurrency 128, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 41262.34ms E2E latency (173s)
[progress] [===============-----------------------------------] 6/20 (30%)  | Serving: C128 R1
Sleeping 10 seconds between runs for concurrency 128 to avoid memory access faults...
Running serving benchmark with concurrency 128 (Run 2) - 500 prompts...
Concurrency 128, Run 2 completed: 500 requests, (tok/s): tok/s output throughput, 38360.70ms E2E latency (161s)
[progress] [=================---------------------------------] 7/20 (35%)  | Serving: C128 R2
Sleeping 10 seconds between runs for concurrency 128 to avoid memory access faults...
Running serving benchmark with concurrency 128 (Run 3) - 500 prompts...
Concurrency 128, Run 3 completed: 500 requests, (tok/s): tok/s output throughput, 37011.28ms E2E latency (156s)
[progress] [====================------------------------------] 8/20 (40%)  | Serving: C128 R3
✅ Best results for concurrency 128: E2E=37011.28ms, TTFT=9606.81ms, ITL=26.60ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 128: E2E=37011.28ms, TTFT=9606.81ms, ITL=26.60ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 128
Sleeping 3 seconds before next concurrency level...
Processing concurrency 64 with 3 runs...
Running serving benchmark with concurrency 64 (Run 1) - 500 prompts...
Concurrency 64, Run 1 completed: 500 requests, (tok/s): tok/s output throughput, 25775.96ms E2E latency (217s)
[progress] [======================----------------------------] 9/20 (45%)  | Serving: C64 R1
Sleeping 10 seconds between runs for concurrency 64 to avoid memory access faults...
Running serving benchmark with concurrency 64 (Run 2) - 500 prompts...
Concurrency 64, Run 2 completed: 500 requests, (tok/s): tok/s output throughput, 25692.74ms E2E latency (219s)
[progress] [=========================-------------------------] 10/20 (50%)  | Serving: C64 R2
Sleeping 10 seconds between runs for concurrency 64 to avoid memory access faults...
Running serving benchmark with concurrency 64 (Run 3) - 500 prompts...
Concurrency 64, Run 3 completed: 500 requests, (tok/s): tok/s output throughput, 25623.49ms E2E latency (215s)
[progress] [===========================-----------------------] 11/20 (55%)  | Serving: C64 R3
✅ Best results for concurrency 64: E2E=25623.49ms, TTFT=5430.00ms, ITL=22.17ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 64: E2E=25623.49ms, TTFT=5430.00ms, ITL=22.17ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 64
Sleeping 3 seconds before next concurrency level...
Processing concurrency 16 with 3 runs...
Running serving benchmark with concurrency 16 (Run 1) - 128 prompts...
Concurrency 16, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 16304.45ms E2E latency (141s)
[progress] [==============================--------------------] 12/20 (60%)  | Serving: C16 R1
Sleeping 10 seconds between runs for concurrency 16 to avoid memory access faults...
Running serving benchmark with concurrency 16 (Run 2) - 128 prompts...
Concurrency 16, Run 2 completed: 128 requests, (tok/s): tok/s output throughput, 16070.79ms E2E latency (139s)
[progress] [================================------------------] 13/20 (65%)  | Serving: C16 R2
Sleeping 10 seconds between runs for concurrency 16 to avoid memory access faults...
Running serving benchmark with concurrency 16 (Run 3) - 128 prompts...
Concurrency 16, Run 3 completed: 128 requests, (tok/s): tok/s output throughput, 15910.36ms E2E latency (137s)
[progress] [===================================---------------] 14/20 (70%)  | Serving: C16 R3
✅ Best results for concurrency 16: E2E=15910.36ms, TTFT=2244.54ms, ITL=16.36ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 16: E2E=15910.36ms, TTFT=2244.54ms, ITL=16.36ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 16
Sleeping 3 seconds before next concurrency level...
Processing concurrency 4 with 3 runs...
Running serving benchmark with concurrency 4 (Run 1) - 128 prompts...
Concurrency 4, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 13227.90ms E2E latency (434s)
[progress] [=====================================-------------] 15/20 (75%)  | Serving: C4 R1
Running serving benchmark with concurrency 4 (Run 2) - 128 prompts...
Concurrency 4, Run 2 completed: 128 requests, (tok/s): tok/s output throughput, 13182.58ms E2E latency (431s)
[progress] [========================================----------] 16/20 (80%)  | Serving: C4 R2
Running serving benchmark with concurrency 4 (Run 3) - 128 prompts...
Concurrency 4, Run 3 completed: 128 requests, (tok/s): tok/s output throughput, 13220.67ms E2E latency (434s)
[progress] [==========================================--------] 17/20 (85%)  | Serving: C4 R3
✅ Best results for concurrency 4: E2E=13182.58ms, TTFT=1003.19ms, ITL=14.72ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 4: E2E=13182.58ms, TTFT=1003.19ms, ITL=14.72ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 4
Sleeping 3 seconds before next concurrency level...
Processing concurrency 1 with 3 runs...
Running serving benchmark with concurrency 1 (Run 1) - 128 prompts...
Concurrency 1, Run 1 completed: 128 requests, (tok/s): tok/s output throughput, 12330.33ms E2E latency (1588s)
[progress] [=============================================-----] 18/20 (90%)  | Serving: C1 R1
Running serving benchmark with concurrency 1 (Run 2) - 128 prompts...
Concurrency 1, Run 2 completed: 128 requests, (tok/s): tok/s output throughput, 12323.54ms E2E latency (1587s)
[progress] [===============================================---] 19/20 (95%)  | Serving: C1 R2
Running serving benchmark with concurrency 1 (Run 3) - 128 prompts...
Concurrency 1, Run 3 completed: 128 requests, (tok/s): tok/s output throughput, 12367.41ms E2E latency (1595s)
[progress] [==================================================] 20/20 (100%) ✅ Complete!
 | Serving: C1 R3
✅ Best results for concurrency 1: E2E=12323.54ms, TTFT=451.14ms, ITL=14.36ms, Output=(tok/s): tok/s
[online] Updating CSV for concurrency 1: E2E=12323.54ms, TTFT=451.14ms, ITL=14.36ms, Output=(tok/s): tok/s
[online] CSV updated with results for concurrency 1
✅ Serving benchmark completed successfully in 7717 seconds (DP test mode).
Structured serving benchmark results written to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_serving_dp_attention.csv
Individual concurrency logs saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_serving_benchmark_concurrency_*_run*.log
GSM8K accuracy results written to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/sglang_client_log_DeepSeek-R1-MXFP4-Preview_gsm8k.log
Shutting down SGLang server...
/mnt/raid/michael/sglang-ci/deepseek_perf_online_csv.sh: line 788: [: 0
0: integer expression expected
/mnt/raid/michael/sglang-ci/deepseek_perf_online_csv.sh: line 800: [: 0
0: integer expression expected
Server shutdown completed in 0 seconds

==========================================
SCRIPT EXECUTION SUMMARY
==========================================
Script completed at: 2025-10-11 17:04:03 PDT
Total execution time: 8009 seconds (133 minutes)
Output directory: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention
Serving CSV: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_serving_dp_attention.csv
Timing log: /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online_dp_attention/timing_summary_20251011_145034.log
===========================================
Cleaning up...
Killing background SGLang server (PID: 46)...
Server process 46 not found or already terminated.
[nightly] === Online benchmark dispatched for DEEPSEEK; check logs in sgl-dev_v0.5.3.post1-rocm700-mi35x-20251011 ===
[nightly] === Starting post-processing (CSV processing, plot generation, Teams notifications) ===
[nightly] Processing online CSV data and generating plots... Logs will be saved to /mnt/raid/michael/sglang-ci/online/DeepSeek-R1-MXFP4-Preview/v0.5.3.post1-rocm700-mi35x-20251011_DeepSeek-R1-MXFP4-Preview_FP8_online/process_and_generate_online_plots.log
[nightly] Using plot date from image tag: 20251011
[nightly] Sending Teams notification for deepseek online plots...
[nightly] Adding benchmark date to Teams notification: 20251011
[nightly] Teams notification using plot directory: /mnt/raid/michael/sglang-ci/plots_server
[nightly] No GitHub credentials configured - using plot server links only
[nightly] To enable GitHub upload, set GITHUB_REPO and GITHUB_TOKEN environment variables
[nightly] Including intelligent analysis (7 days lookback)
[nightly] Adding --check-dp-attention flag for Teams notification
[nightly] Adding --enable-dp-test flag for Teams notification
📡 Plot server base URL: http://10.235.26.27:8000
📁 Plot directory: /mnt/raid/michael/sglang-ci/plots_server
🗂️  Benchmark directory: /mnt/raid/michael/sglang-ci
🔍 DP attention mode: Checking for RuntimeError and critical errors in server logs
🧬 DP test mode: Highlighting DP throughput benchmark and serving logs
   No timing_summary log found for deepseek online on 20251012 - benchmark may not have run yet
   Found timing_summary log for deepseek online on 20251011: timing_summary_20251011_145034.log
   Found timing_summary log for deepseek online on 20251010: timing_summary_20251011_060043.log
🔍 Discovered 2 plot file(s) for deepseek online
   - 20251010_DeepSeek-R1-MXFP4-Preview_online.png -> http://10.235.26.27:8000/DeepSeek-R1-MXFP4-Preview/online/20251010_DeepSeek-R1-MXFP4-Preview_online.png
   - 20251010_DeepSeek-V3_online.png -> http://10.235.26.27:8000/DeepSeek-V3-0324/online/20251010_DeepSeek-V3_online.png
🔍 Analyzing benchmark results for accuracy and performance...
   Found timing_summary log for deepseek online on 20251011: timing_summary_20251011_145034.log
   Found timing_summary log for deepseek online on 20251011: timing_summary_20251011_145034.log
   Found timing_summary log for deepseek online on 20251011: timing_summary_20251011_145034.log
🔍 Sending adaptive card with plot links
📊 Payload size: 0.00MB
✅ Successfully sent Teams notification for deepseek online plots
   (Power Automate flow accepted - message processing asynchronously)
🎉 Teams notification sent successfully! (with intelligent analysis)
[nightly] Teams notification sent successfully for deepseek online
[nightly] === Online post-processing completed for DEEPSEEK ===
[nightly] ==========================================
[nightly] Completed benchmarks for image: rocm/sgl-dev:v0.5.3.post1-rocm700-mi35x-20251011
[nightly] Stopping container sgl-dev_v0.5.3.post1-rocm700-mi35x-20251011 to release resources...
[nightly] ==========================================
[nightly] ==========================================
[nightly] All benchmarks completed for 1 image(s)
[nightly] ==========================================
[nightly] Cleaning up process lock...
